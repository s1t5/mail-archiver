@using MailArchiver.ViewModels
@inject Microsoft.Extensions.Localization.IStringLocalizer<MailArchiver.SharedResource> Localizer
@model MailArchiver.ViewModels.EditSyncTimeViewModel
@{
    ViewData["Title"] = Localizer["EditSyncTimeTitle"];
}

<div class="container">
    <h1>@Localizer["EditSyncTimeTitle"]</h1>
    
    <div class="card">
        <div class="card-body">
            <h5 class="card-title">@string.Format(Localizer["EditSyncTimeForAccount"].Value, Model.AccountName)</h5>
            
            <form asp-action="EditSyncTime" method="post">
                @Html.AntiForgeryToken()
                <input type="hidden" asp-for="Id" />
                <input type="hidden" asp-for="AccountName" />
                <input type="hidden" asp-for="CurrentSyncTime" />
                
                <div class="mb-3">
                    <label asp-for="NewSyncTime" class="form-label">@Localizer["NewSyncTime"]</label>
                    <input asp-for="NewSyncTime" class="form-control" type="datetime-local" value="@Model.NewSyncTime.ToString("yyyy-MM-ddTHH:mm")" />
                    <span asp-validation-for="NewSyncTime" class="text-danger"></span>
                    <div class="form-text">
                        @Localizer["EditSyncTimeNote"]
                    </div>
                </div>
                
                <div class="mb-3">
                    <label class="form-label">@Localizer["CurrentSyncTime"]</label>
                    <div class="form-control-plaintext">
                        @if (Model.CurrentSyncTime.Year > 1970)
                        {
                            <span class="utc-timestamp" data-utc-time="@Model.CurrentSyncTime.ToUniversalTime().ToString("yyyy-MM-ddTHH:mm:ss")">
                                @Model.CurrentSyncTime.ToString("g")
                            </span>
                        }
                        else
                        {
                            <span class="text-muted">@Localizer["NotYetSynchronized"]</span>
                        }
                    </div>
                </div>
                
                <div class="d-flex gap-2">
                    <button type="submit" class="btn btn-primary">
                        <i class="bi bi-check-circle"></i> @Localizer["Save"]
                    </button>
                    <a asp-action="Details" asp-route-id="@Model.Id" class="btn btn-secondary">
                        <i class="bi bi-x-circle"></i> @Localizer["Cancel"]
                    </a>
                </div>
            </form>
        </div>
    </div>
</div>

@section Scripts {
    <partial name="_ValidationScriptsPartial" />
}
